{% extends "base.html" %}
{% block body %}
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <i class="bi bi-key"></i> Initial SSH Setup
                </div>
                <div class="card-body">
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i> <strong>SSH Key Required</strong>
                        <p class="mb-0 mt-2">To connect to your Dokku server, you need to add the following SSH public key to your server.</p>
                    </div>

                    <div class="mb-4">
                        <label class="form-label"><strong>Instructions:</strong></label>
                        <ol>
                            <li>Copy the SSH key below (as one line)</li>
                            <li>Save it to a file on your Dokku server</li>
                            <li>Run the <code>ssh-keys:add</code> command following the <a href="https://dokku.com/docs/deployment/user-management/#adding-ssh-keys" target="_blank">Dokku instructions for setting up SSH keys</a></li>
                        </ol>
                    </div>

                    <div class="mb-4">
                        <label class="form-label"><strong>SSH Public Key:</strong></label>
                        <div class="card bg-light">
                            <div class="card-body">
                                <code id="ssh-key" style="word-break: break-all; white-space: pre-wrap;">{{ key }}</code>
                            </div>
                        </div>
                        <button class="btn btn-outline-primary mt-2" onclick="copyToClipboard('{{ key }}')">
                            <i class="bi bi-clipboard"></i> Copy to Clipboard
                        </button>
                    </div>

                    <div class="text-center">
                        <a href="" onclick="location.reload(); return false;" class="btn btn-primary">
                            <i class="bi bi-arrow-clockwise"></i> Reload After Setup
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                alert('SSH key copied to clipboard!');
            }, function(err) {
                console.error('Failed to copy: ', err);
            });
        }
    </script>
{% endblock body %}
